Updated Folder Plan

Under ROOT
  agentic_rag/
  â”œâ”€â”€ master_rag_agent.py        # ğŸ§  Entry dispatcher: Store or Retrieve
  â”œâ”€â”€ store_pipeline.py          # ğŸ“¥ Store pipeline logic
  â”œâ”€â”€ store_logger.py            # ğŸ“ Supabase logging for store
  â”œâ”€â”€ retrieve_pipeline.py       # ğŸ” Retrieve pipeline logic
  â”œâ”€â”€ retrieve_logger.py         # ğŸ“ Supabase logging for queries
  â”œâ”€â”€ universal_loader.py        # ğŸ“‚ File loader for PDF, TXT, etc.
  â”œâ”€â”€ index_router.py            # ğŸ§­ Index selection logic
  â”œâ”€â”€ llm_wrapper.py             # ğŸ§  LLM switch (GPT/Gemini)
  â”œâ”€â”€ vector_db_config.json      # ğŸ”§ Config file for index metadata
  â”œâ”€â”€ utils.py                   # ğŸ”§ Debug log, shared utils
  â””â”€â”€ __init__.py

agentic_rag/
â”œâ”€â”€ master_rag_agent.py        # ğŸ§  Entry dispatcher: Store or Retrieve
â”œâ”€â”€ store_pipeline.py          # ğŸ“¥ Store pipeline logic (MongoDB-based vector store)
â”œâ”€â”€ store_logger.py            # ğŸ“ Logs STORE events to MongoDB Atlas
â”œâ”€â”€ retrieve_pipeline.py       # ğŸ” Retrieve logic using LangChain & MongoDB
â”œâ”€â”€ retrieve_logger.py         # ğŸ“ Logs RETRIEVE queries to MongoDB Atlas
â”œâ”€â”€ universal_loader.py        # ğŸ“‚ File loader for all supported formats
â”œâ”€â”€ index_router.py            # ğŸ§­ Route request to correct vector index
â”œâ”€â”€ llm_wrapper.py             # ğŸ§  GPT vs Gemini LLM interface
â”œâ”€â”€ vector_db_config.json      # ğŸ”§ Config file for index and model mapping
â”œâ”€â”€ mongo_client.py            # ğŸŒ MongoDB vectorstore and log DB connector
â”œâ”€â”€ log_viewer.py              # ğŸ“Š CLI utility to view/search MongoDB logs
â”œâ”€â”€ utils.py                   # ğŸ”§ Shared helpers, file utils, logging
â””â”€â”€ __init__.py                # ğŸ” Python package initializer


âœ… ACTION PLAN: ENTERPRISE-GRADE AGENTIC-RAG
ğŸ”§ Module Breakdown

| File                    | Purpose                                                                       | STATUS
| ----------------------- | ----------------------------------------------------------------------------- |--------
| `master_rag_agent.py`   | Entrypoint: route Store/Retrieve, validate intent                             | NOT YET UPDATED
| `store_pipeline.py`     | Ingest file â†’ chunk â†’ embed â†’ push to MongoDB vector store                    | UPDATED
| `store_logger.py`       | Logs STORE metadata into MongoDB `store_logs` collection                      | UPDATED
| `retrieve_pipeline.py`  | Accepts query, retrieves relevant chunks, runs LLM synthesis                  | NOT YET UPDATED
| `retrieve_logger.py`    | Logs query, LLM used, result metadata into MongoDB `retrieve_logs`            | UPDATED
| `llm_wrapper.py`        | Abstraction to call GPT-4/Gemini with common config params                    | NEW
| `universal_loader.py`   | Reads and cleans supported file types (PDF, DOCX, MP4, TXT, etc.)             | NOT SURE
| `index_router.py`       | Selects vector index and LLM config based on tag from `vector_db_config.json` | NOT YET UPDATED
| `vector_db_config.json` | Maps index â†’ embedding model â†’ retriever config â†’ chunking strategy           | NOT YET UPDATED
| `mongo_client.py`       | Handles MongoDB vector DB and log connections (via pymongo + langchain)       | NEW
| `log_viewer.py`         | CLI tool to search, filter, and view logs from MongoDB Atlas                  | NEW
| `utils.py`              | Helper functions (debug print, file utils, hash, timers, etc.)                | NOT SURE
| `__init__.py`           | Marks `agentic_rag/` as a Python module                                       |


âœ… NEW MODULE: vector_db_config.json
{
  "rag_hr_policy": {
    "domain_tags": ["hr", "leave policy", "attendance", "benefits"],
    "embedding_model": "OpenAI",
    "namespace": "rag_hr_policy"
  },
  "rag_finance": {
    "domain_tags": ["finance", "q1 revenue", "accounts", "audit"],
    "embedding_model": "OpenAI",
    "namespace": "rag_finance"
  },
  "rag_compliance": {
    "domain_tags": ["legal", "compliance", "regulation", "policy"],
    "embedding_model": "OpenAI",
    "namespace": "rag_compliance"
  }
}

